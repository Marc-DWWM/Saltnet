{% extends 'base.html.twig' %}

{% block body %}
	<div class="container mx-auto p-4">
		<h2 class="text-3xl font-semibold text-gray-800 mb-6">Tableau de bord</h2>

		<div class="card shadow-lg rounded-lg overflow-hidden">
			<div class="card-header bg-[#21213B] text-white py-4 px-6">
				<h3 class="text-xl font-medium">Liste des Utilisateurs</h3>
			</div>
			<div class="card-body bg-[#21213B] p-6">
				<div class="flex flex-col space-y-4">
					{% for user in users %}
						<div class="flex flex-col justify-center items-center border-t border-gray-100 py-3 px-4">
							<div class="w-1/12 text-sm text-white p-2 w-[150px]" aria-label="ID de l'utilisateur">
								<p class="underline">ID</p>
								{{ user.id }}</div>
							<div class="w-3/12 text-sm text-white p-2 w-[150px]" aria-label="Nom d'utilisateur">
								<p class="underline">Username</p>
								{{ user.username }}</div>
							<div class="w-4/12 text-sm text-white p-2 w-[150px]" aria-label="Email de l'utilisateur">
								<p class="underline">Email</p>
								{{ user.email }}</div>
							<div class="w-2/12 text-sm text-white p-2 w-[150px]" aria-label="Rôles de l'utilisateur">
								<p class="underline">Rôles</p>
								{{ user.roles|join(', ') }}</div>
							<div class="w-2/12 text-sm text-white p-2 w-[150px]" aria-label="Date de création de l'utilisateur">
								<p class="underline" class="w-[50px]">Date de création</p>
								{{ user.createdAt ? user.createdAt|date('Y-m-d H:i:s') : 'Non défini' }}
							</div>
							<div>
								<form action="{{ path('admin_user_delete', {'id': user.id}) }}" method="POST">
									<input type="hidden" name="_method" value="DELETE">
									<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
									<button type="submit" aria-label="Supprimer compte" class="mt-6 w-28 bg-[#FF1B1C] opacity-75 hover:opacity-100 text-white text-sm text-center py-2 rounded-full">
										Supprimer
									</button>
								</form>
							</div>

						{% else %}
							<div class="flex border-t border-gray-100 py-3 px-4">
								<div class="w-full text-sm text-gray-500 text-center" aria-label="Aucun utilisateur trouvé">Aucun utilisateur trouvé</div>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	{% endblock %}
